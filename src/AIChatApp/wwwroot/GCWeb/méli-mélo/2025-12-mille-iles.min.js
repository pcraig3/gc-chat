/*!
 * @title Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
 * @license wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html
 * v17.5.0 - 2025-09-23
 *
 */
((r,l)=>{var s="wb-math-grid",a="."+s;l.doc.on("timerpoke.wb wb-init.wb-math-grid",a,function(t){t=l.init(t,s,a);if(t){var i,n,o=(i=r(t)).find(".mg-row");if(0!==o.length){let e=[];o.each(function(t){var a=r(this).find(".mg-cell").length;e.push({count:a,row:t+1})});let a=e[0].count;e.every(t=>t.count===a)?(o=(o=r(this).attr("data-wb-math-grid"))?JSON.parse(o)?.srPause:void 0,n=r(this).find(".mg-cell"),!0===o?r(this).attr("role","presentation"):n.attr("role","none"),n.each(function(){""===r(this).text().replace(/[\u202F\u00A0]/g,"").trim()&&r(this).attr("aria-hidden","true")})):(console.error("Grid layout error for"+t.id+" - inconsistent cell counts detected:\n"+e.map(t=>`→ Row: ${t.row}, Cell count: `+t.count).join("\n")),r(this).addClass("bg-danger")),l.ready(i,s)}}}),l.add(a)})(jQuery,(window,wb)),((f,l,b)=>{var s={en:{"future-msg":"Some Future Messages"},fr:{"future-msg":"(FR) Some Future Messages"}}[b.lang],c={},u="wb-tables-utility",d="."+u,t="wb-init"+d,a=b.doc,h={filteredsum:!0},g=function(t){return!!c.debug&&("object"==typeof t?console.table(t):console.log(`DEBUG '${u}': `+t))};function m(t){return"string"==typeof(t="string"==typeof t&&"fr"==b.lang?t.replace(/[,]/g,"."):t)?+t.replace(/[\$,\s%]/g,""):"number"==typeof t?t:0}l["wb-tables"]?console.error("Can not initialize wb-table global settings as it is already define."):(l["wb-tables"]={footerCallback:function(t,a,e,i,n){var o,r,l;f(this).hasClass("wb-tables-utility")&&(o=f(this).data("wb-tables-utility"),g("wb-datatable-utility: footerCallback Executed"),r=this.api(),l={search:"applied"},void 0!==o&&o&&!o.filteredsum&&(l={}),r.columns(".wb-col-sum",{}).every(function(t){var a=r.column(t,l).data().reduce(function(t,a){return m(t)+m(a)},0),e=0,e=f(this.header()).hasClass("wb-col-money")?("fr"==b.lang?function(t,a){return 1==arguments.length&&(a=2),m(t).toFixed(a).replace(/\d(?=(\d{3})+\.)/g,"$& ").replace(/\./,",")+" $"}:function(t,a){return 1==arguments.length&&(a=2),"$"+m(t).toFixed(a).replace(/\d(?=(\d{3})+\.)/g,"$&,")})(a):f(this.header()).hasClass("cur-thousand-col")||f(this.header()).hasClass("wb-col-cur-thousand")?(a=r.column(t,l).data().reduce(function(t,a){return m(t)+m(a)},0),formatedNumber=parseFloat(a).toFixed(2),Number(formatedNumber).toLocaleString(b.lang,{minimumFractionDigits:2,maximumFractionDigits:2})):a;f(r.column(t).footer()).html("<strong>"+e.toString().replace(/\s/g,"&nbsp;")+"</strong>")}))}},l["wb-tables"][u]=!0),f(".wb-tables.wb-tables-utility").on("xhr.dt",function(){var t=f(this).DataTable(),a="data",i=(void 0!==t.settings().init().ajax.dataSrc&&(a=t.settings().init().ajax.dataSrc),t.data().row().ajax.json()[a]);if(void 0===i)g("wb-pspc-plugin: Could Not Get wb-table JSON Data Bailing Out");else{var e,n=[],o=[],r=[],l=[],s=t.settings().init().columns,c=t.columns().visible(),u=[];for(e in s)c[e]&&u.push(s[e]);f(this).find("th.mailto-col, th.wb-col-mailto").each(function(){n.push(u[f(this).index()].data)}),f(this).find("th.cur-thousand-col, th.wb-col-cur-thousand").each(function(){o.push(u[f(this).index()].data)}),f(this).find("th.wb-col-money").each(function(){r.push(u[f(this).index()].data)}),f(this).find("th.url-col, th.wb-col-url").each(function(){l.push(u[f(this).index()].data)});for(var d=0,h=i.length;d<h;d++)r.forEach(function(t){var a=i[d][t].replace(/[\s,]/g,""),a=parseFloat(a).toFixed(2),a=Number(a).toLocaleString(b.lang,{minimumFractionDigits:2,maximumFractionDigits:2});"fr"==b.lang?i[d][t]=a+" $":i[d][t]="$"+a}),o.forEach(function(t){var a=i[d][t].replace(/[\s,]/g,""),a=parseFloat(a).toFixed(2);i[d][t]=Number(a).toLocaleString(b.lang,{minimumFractionDigits:2,maximumFractionDigits:2})}),n.forEach(function(t){var a,e=i[d][t];e.match(/mailto:/)||(a=e.match(/(?<!"\>)([a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4})/g))&&a.forEach(function(t){var a='<a href="mailto:'+t.toLowerCase()+'">'+t.toLowerCase()+"</a>";e=e.replace(t,a)}),i[d][t]=e}),l.forEach(function(a){var e=i[d][a],t="";(t=i[d][a+"-url"]?i[d][a+"-url"]:t)?i[d][a]=`<a href="${t}">${e}</a>`:(t=e.match(/(https?:\/\/[^ ]*)/))&&t.forEach(function(t){i[d][a]=e.replace(t,`<a href="${t}">${t}</a>`)})})}}),a.on("timerpoke.wb "+t,d,function(t){var a,t=b.init(t,u,d);if(t){if(t=f(t),a=f.extend(!0,{},h,l[u],b.getData(t,u)),c=a,l["wb-tables"]&&l["wb-tables"][u]){for(var e,i=a,n=Object.keys(i),o=n.length,r={};o--;)e=n[o],r[e.toLowerCase().trim()]=i[e];r&&r.pluginlabels&&Object.keys(r.pluginlabels[0]).forEach(t=>{s[t]=r.pluginlabels[0][t]}),g("PSPC: wb-pspc-datatable-utility plugin Version 1.1.1 Initialized"),g(r)}b.ready(t,u)}}),b.add(d)})(jQuery,window,wb);